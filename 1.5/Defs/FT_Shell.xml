<?xml version="1.0" encoding="utf-8"?>
<Defs>
  <ThingDef ParentName="ShellBase">
    <defName>FT_Shell_NuclearWarhead</defName>
    <label>nuclear warhead</label>
    <description>An industrial-tech warhead powered by consists of precisely calculated explosives and uranium. it creates a huge explosion, electromagnetic pulse, and ignite flammable object around the target, even not within kill range you will still be stunned by the shockwave and violent flashes.\n It can be fired from mortars or launched by artillery. Won't explode when damaged.\n\n But be aware, that a nuclear explosion could have unpredictable adverse effects on the environment.\n\n Powerful yet highly controversial weapons. While they are widely used in some worlds, they are strictly banned in many other worlds.\n Most industrial worlds prefer purchasing clean anti-grain warheads from core worlds over building nuclear warheads themselves under the excuse that the former is more environment-friendly than the latter.\nStill, the truth is more than that: It is the need of the arms dealers from the core worlds for a place to dump the mass-produced anti-grain weaponry that drove the industrial worlds into mass purchasing such warheads. unlike nuclear warheads, reverse engineering them is impossible in the industrial world.</description>
    <graphicData>
      <texPath>FT_NuclearDawn/FT_Nuke</texPath>
      <graphicClass>Graphic_StackCount</graphicClass>
    </graphicData>
    <tradeability>Sellable</tradeability>
    <statBases>
      <MarketValue>2500</MarketValue>
    </statBases>
    <thingSetMakerTags>
      <li>NuclearWeapon</li>
      <li>RewardStandardHighFreq</li>
    </thingSetMakerTags>
    <projectileWhenLoaded>FT_Bullet_NuclearWarhead</projectileWhenLoaded>
  </ThingDef>

  <ThingDef ParentName="BaseBullet">
    <defName>FT_Bullet_NuclearWarhead</defName>
    <label>nuclear warhead</label>
    <thingClass>Fortification.Projectile_ExplosiveByComps</thingClass>
    <graphicData>
      <texPath>FT_NuclearDawn/FT_Shell_Nuke</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
    </graphicData>
    <modExtensions>
      <li Class="Fortification.ModExtension_ExpolsionWithEvents">
        <conditions>
          <li>
            <conditionDef>FTND_NuclearFlare</conditionDef>
            <percent>1</percent>
            <duration>180000~360000</duration>
          </li>
          <li>
            <conditionDef>FTND_NuclearFlare</conditionDef>
            <percent>5</percent>
            <duration>15000~180000</duration>
          </li>
          <li>
            <conditionDef>FTND_NuclearFlare</conditionDef>
            <percent>25</percent>
            <duration>2500~15000</duration>
          </li>
          <li>
            <conditionDef>FTND_NuclearFallout</conditionDef>
            <percent>1</percent>
            <duration>360000</duration>
          </li>
          <li>
            <conditionDef>FTND_NuclearFallout</conditionDef>
            <percent>5</percent>
            <duration>60000~180000</duration>
          </li>
          <li>
            <conditionDef>FTND_NuclearFallout</conditionDef>
            <percent>25</percent>
            <duration>15000</duration>
          </li>
          <li>
            <conditionDef>FTND_NuclearWinter</conditionDef>
            <percent>1</percent>
            <duration>360000~960000</duration>
          </li>
          <li>
            <conditionDef>FTND_NuclearWinter</conditionDef>
            <percent>5</percent>
            <duration>60000~360000</duration>
          </li>
          <li>
            <conditionDef>FTND_Flashstorm</conditionDef>
            <percent>25</percent>
            <duration>10000~30000</duration>
          </li>
        </conditions>
      </li>
      <li Class="Fortification.ModExtension_CompositeExplosion">
        <compositeExplosions>
          <li>
            <!--核爆心-->
            <countdown>1</countdown>
            <radius>5.9</radius>
            <damamgeDef>Bomb</damamgeDef>
            <amount>500</amount>
            <armorPenetration>2</armorPenetration>
            <explosionSound>MortarBomb_Explode</explosionSound>
          </li>
          <li>
            <countdown>1</countdown>
            <radius>14.9</radius>
            <damamgeDef>EMP</damamgeDef>
            <amount>80</amount>
            <armorPenetration>2</armorPenetration>
            <explosionSound>Explosion_EMP</explosionSound>
          </li>
          <li>
            <countdown>2</countdown>
            <radius>10.9</radius>
            <damamgeDef>Flame</damamgeDef>
            <amount>80</amount>
            <armorPenetration>2</armorPenetration>
            <explosionSound>MortarBomb_Explode</explosionSound>
            <preExplosionSpawnThingDef>Filth_Fuel</preExplosionSpawnThingDef>
            <preExplosionSpawnChance>0.25</preExplosionSpawnChance>
            <preExplosionSpawnThingCount>50</preExplosionSpawnThingCount>
            <postExplosionSpawnThingDef>Filth_Fuel</postExplosionSpawnThingDef>
            <postExplosionSpawnChance>0.75</postExplosionSpawnChance>
            <postExplosionSpawnThingCount>25</postExplosionSpawnThingCount>
            <chanceToStartFire>0.25</chanceToStartFire>
          </li>
        </compositeExplosions>
      </li>
    </modExtensions>
    <projectile>
      <damageDef>Stun</damageDef>
      <speed>41</speed>
      <damageAmountBase>80</damageAmountBase>
      <explosionRadius>24.9</explosionRadius>
      <explosionDelay>3</explosionDelay>
      <explosionEffect>GiantExplosion</explosionEffect>
      <flyOverhead>true</flyOverhead>
      <soundHitThickRoof>Artillery_HitThickRoof</soundHitThickRoof>
      <soundExplode>Explosion_GiantBomb</soundExplode>
      <soundImpactAnticipate>MortarRound_PreImpact</soundImpactAnticipate>
      <soundAmbient>MortarRound_Ambient</soundAmbient>
    </projectile>
  </ThingDef>

  <ThingDef ParentName="BaseGun">
    <defName>FTND_NukeLauncher</defName>
    <label>nuclear launcher</label>
    <description>A single-use recoilless launcher produced using a lathe, which is designed to fire an N-45 nuclear shell known as codename: chibby. Good against large groups of soft targets or a massive fortification.\n\n As a single-use massive destruction weapon it may lead to friendly fire quite commonly, be aware of use.</description>
    <tickerType>Normal</tickerType>
    <techLevel>Industrial</techLevel>
    <graphicData>
      <texPath>FT_NuclearDawn/ChibbyLauncher</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <smeltable>false</smeltable>
    <statBases>
      <MarketValue>1000</MarketValue>
      <Mass>13</Mass>
      <RangedWeapon_Cooldown>5</RangedWeapon_Cooldown>
    </statBases>
    <generateCommonality>0.5</generateCommonality>
    <equippedAngleOffset>45</equippedAngleOffset>
    <weaponTags>
      <li>GunSingleUse</li>
    </weaponTags>
    <weaponClasses>
      <li>RangedHeavy</li>
    </weaponClasses>
    <tradeTags>
      <li>ExoticMisc</li>
    </tradeTags>
    <thingSetMakerTags>
      <li>NuclearWeapon</li>
      <li>SingleUseWeapon</li>
      <li>RewardStandardLowFreq</li>
    </thingSetMakerTags>
    <relicChance>0</relicChance>
    <verbs>
      <li>
        <verbClass>Verb_ShootOneUse</verbClass>
        <hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>FT_Bullet_NuclearWarhead</defaultProjectile>
        <forcedMissRadius>1.9</forcedMissRadius>
        <warmupTime>4.5</warmupTime>
        <ai_AvoidFriendlyFireRadius>10</ai_AvoidFriendlyFireRadius>
        <range>40</range>
        <minRange>20</minRange>
        <burstShotCount>1</burstShotCount>
        <soundCast>InfernoCannon_Fire</soundCast>
        <soundCastTail>GunTail_Heavy</soundCastTail>
        <onlyManualCast>true</onlyManualCast>
        <targetParams>
          <canTargetLocations>true</canTargetLocations>
        </targetParams>
        <muzzleFlashScale>14</muzzleFlashScale>
      </li>
    </verbs>
    <tools>
      <li>
        <label>barrel</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>11.7</power>
        <cooldownTime>2.6</cooldownTime>
      </li>
    </tools>
  </ThingDef>
</Defs>